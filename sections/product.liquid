{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}
<div class='slider'>
  <ul class='images'>
    {% for image in product.images %}
      {% assign prev = 0 %}
      {% assign next = 0 %}
      {% if forloop.index == 1 %}
          {% assign prev = forloop.length %}
          {% assign next = forloop.index | plus: 1 %}
      {% elsif forloop.index == forloop.length %}
          {% assign prev = forloop.index | minus: 1 %}
          {% assign next = 1 %}
      {% else %}
          {% assign prev = forloop.index | minus: 1 %}
          {% assign next = forloop.index | plus: 1 %}
      {% endif %}
    <li class='product-image' id='image-{{forloop.index}}' >
      <picture>
        <source srcset="{{ image | img_url: '300x' }}, {{ image | img_url: '600x' }} 2x">
        <img src="{{ image | img_url: '300x' }}" width='100%' height='100%' >
      </picture>
      <a class='control left' href='#image-{{prev}}'>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-left"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </a>
      <a class='control right' href='#image-{{next}}'>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </a>
    </li>
  {% endfor %}
</ul>
</div>
<ul class='image-nav'>
  {% assign more-images = 0 %}
  <input type='radio' name='radio-button' id='show-more' />
  
  {% for image in product.images %}
    {% if forloop.index < 4 %}
      <li class='product-image'>
        <a href='#image-{{forloop.index}}'>
          <picture>
            <source srcset="{{ image | img_url: '300x' }}, {{ image | img_url: '600x' }} 2x">
            <img src="{{ image | img_url: '300x' }}" width='100%' height='100%'>
          </picture>
        </a>
      </li>
    {% else %}
    {% assign more-images = more-images | plus: 1 %}
      <li class='product-image more'>
        <a href='#image-{{forloop.index}}'>
          <picture>
            <source srcset="{{ image | img_url: '300x' }}, {{ image | img_url: '600x' }} 2x">
            <img src="{{ image | img_url: '300x' }}" width='100%' height='100%'>
          </picture>
        </a>
      </li>
    {% endif %}
  {% endfor %}
  <li class='show-more'>
    <label for='show-more'>
      + {{ more-images }}
    </label>
  </li>
</ul>

<div class='product-info'>
  <div class='info-01'>
    {% if product.price < product.compare_at_price %}
      <h1 class='price'>
        <span class='original'>{{ product.compare_at_price| money }}</span>
        {{ product.price| money }}
        {% assign og_price = product.compare_at_price | money_without_currency %}
        {% assign percentage = product.price | money_without_currency | divided_by: og_price %}
        {% assign diff = 1 | minus: percentage | times: 100 %}
        <span class='difference'>(-{{ diff | round: 0 }}%)</span>
      </h1>
    {% else %}
      <h1 class='price'>{{ product.price| money }}</h1>
    {% endif %}
    {% assign vendor = collections[product.vendor] %}
    <h1 class='vendor'>{{ product.vendor | link_to: vendor.url}}</h1>
  </div>
  <br>
  <h1 class='title'>{% render 'filtered-product-title' with product.title %}</h1>
  <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
    <select name="id" id="productSelect">
      {% for variant in product.variants %}
        {% if variant.available %}
          <option value="{{ variant.id }}">
            {{ variant.title }} - {{ variant.price | money_with_currency }}
          </option>
        {% else %}
          <option disabled="disabled">
            {{ variant.title }} - sold out
          </option>
        {% endif %}
      {% endfor %}
    </select>
    {{ current_variant.price | money }}
    <label for="Quantity">quantity</label>
    <input type="number" id="Quantity" name="quantity" value="1" min="1">
    <button type="submit" name="add" id="AddToCart">Add to cart</button>
  </form>
  <div>{{ product.description }}</div>
</div>

{% schema %}
    {
        "name": "Product",
        "settings": []
    }
{% endschema %}

{% style %}
.slider {
  position: relative;
  width: 100%;
  overflow: hidden;
  white-space: nowrap;
  scroll-behavior: smooth;
  margin: auto;
  /* padding-top: 8px; */
}
.slider .product-image {
  vertical-align: bottom;
  position: relative;
  display: inline-block;
  width: calc(100% - 64px);
  height: 375px;
  padding: 16px 32px 8px;
}
.slider .control {
  position: absolute;
  top: 0;
  height: 100%;
  width: 32px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #000;
}
.slider .control.left {
  left: 0;
}
.slider .control.right {
  right: 0;
}
ul.image-nav input {
  display: none;
}
.image-nav {
  position: relative;
  vertical-align: top;
  width: calc(100% - 64px);
  margin: auto;
  overflow-x: auto;
  white-space: nowrap;
}
.product-image {
  width: calc(25% - 10px);
  aspect-ratio: 1 / 1;
  display: inline-block;
  margin-right: 8px;
}
.product-image:last-child {
  margin-right: 0;
}
.product-image.more {
  display: none;
}
.image-nav .more-images {
  white-space: nowrap;
  width: auto;
  height: 100%;
}
.image-nav .show-more {
  display: inline-block;
  height: 100%;
  width: calc(25% - 8px);
}
.image-nav .show-more label {
  position: absolute;
  top: 0;
  display: flex;
  aspect-ratio: 1 / 1;
  width: calc(25% - 8px);
  justify-content: center;
  align-items: center;
  background-color: #CBCBCB;
}

#show-more:checked ~ .product-image.more {
  display: inline-block;
}
#show-more:checked ~ .show-more {
  display: none;
}

.image-nav .product-image img, .slider .product-image img {
  object-fit: contain;
}

.image-nav::-webkit-scrollbar {
  height: 4px;
}
.image-nav::-webkit-scrollbar-track {
  background: #fff;
  border-radius: 8px;
}
.image-nav::-webkit-scrollbar-thumb {
  background-color: #CBCBCB;
  border-radius: 8px;
}
.image-nav::-webkit-scrollbar-thumb:hover {
  background: #B5B5B5;
  border-radius: 8px;
}
.product-info {
  position: relative;
  width: calc(100% - 64px);
  margin: auto;
  font-size: 1.6rem;
  font-family: Roboto, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}
.price {
  float: left;
  font-weight: 500;
}
.price .original {
  text-decoration: line-through;
  font-weight: normal;
}
.price .difference {
  font-size: 1.2rem;
  font-weight: normal;
  color: #4F607B;
}
.vendor, .vendor a {
  float: right;
  /* font-weight: 500; */
  color: #4F607B;
  text-decoration: none;
}

.title {
  font-size: 1.4rem;
  padding: 4px 0 16px;
}
  
{% endstyle %}

{% javascript %}
{% endjavascript %}