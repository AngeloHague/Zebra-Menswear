{% render 'dot-separator' %}
<section id="shopify-section-[id]" class="shopify-section">
    <div class='promo_images'>
        {% for block in section.blocks %}
            {% case block.type %}
                {% when 'slide' %}
                    <div class="card">
                        <a href='{{block.settings.collection.url}}'>
                        <div class='image'>
                            <picture>
                                <source media="{max-width:390px}" srcset="{{ block.settings.image_small | image_url }}">
                                <img src="{{ block.settings.collection | img_url: '390x' }}" width='100%' height='100%'>
                            </picture>
                        </div>
                        {% assign placement = forloop.index | modulo: 2 %}
                        {% if placement == 1 %}
                            {% if forloop.index == section.blocks.size %}
                                <div class='caption final'>
                                    <h3>{{block.settings.collection.title}}</h3>
                                    <p>{{ block.settings.caption }}</p>
                                </div>
                            {% else %}
                            <div class='caption right'>
                                <h3>{{block.settings.collection.title}}</h3>
                                <p>{{ block.settings.caption }}</p>
                            </div>
                            {% endif %}
                        {% else %}
                            <div class='caption left'>
                                <h3>{{block.settings.collection.title}}</h3>
                                <p>{{ block.settings.caption }}</p>
                            </div>
                        {% endif %}
                    </a>
                </div>
            {% endcase %}
        {% endfor %}
    </div>
</section>
    

{% schema %}
    {
        "name": "Promotional Images",
        "settings": [
        ],
        "max_blocks": 5,
        "blocks": [
            {
                "name": "Slide",
                "type": "slide",
                "settings": [
                    {
                        "type" : "checkbox",
                        "id" : "show_slide",
                        "label" : "Show Slide",
                        "default": false
                    },
                    {
                        "type" : "text",
                        "id" : "caption",
                        "label" : "Slide Caption",
                        "default" : "View the collection"
                    },
                    {
                        "type" : "collection",
                        "id" : "collection",
                        "label" : "Collection Link"
                    }
                ]
            }
        ]
    }
{% endschema %}

{% style %}
.promo_images {
    width: 100%;
}

.promo_images .card, .promo_images .image {
    position: relative;
    top: 0;
    left: 0;
    width: 390px;
    height: 250px;
}

.promo_images .card {
    margin-bottom: 8px;
}

.promo_images .card:last-of-type {
    margin-bottom: 0;
}

.promo_images .card img {
    object-fit: cover;
}

.promo_images .caption {
    position: absolute;
    bottom: 0;
    min-width: 180px;
    height: 70px;
    margin: 16px;
    background-color: rgba(255, 255, 255, 0.75);
    z-index: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    color: black;
}

.promo_images .caption h3 {
    font-family: 'Comfortaa', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 2rem;
    text-transform: uppercase;
    padding: 0 16px;
}

.promo_images .caption p {
    font-family: Roboto, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 1.1rem;
}

.promo_images .caption.left {
    left: 0;
}

.promo_images .caption.right {
    right: 0;
}

.promo_images .caption.final {
    width: calc(100% - 32px);
}

{% endstyle %}