{% render 'dot-separator' %}
<section id="shopify-section-[id]" class="shopify-section">
    <div class='promo_images'>
        {% for block in section.blocks %}
            {% case block.type %}
                {% when 'slide' %}
                    <div {% if forloop.index == section.blocks.size %} class="card final" {% else %} class="card" {% endif %}>
                        <a href='{{block.settings.collection.url}}'>
                        <div class='image'>
                            <picture>
                                <source media="(max-width:390px)" srcset="{{ block.settings.collection | img_url: '390x' }}, {{ block.settings.collection | img_url: '780x' }} 2x ">
                                <source media="(max-width:512x)" srcset="{{ block.settings.collection | img_url: '512x' }}, {{ block.settings.collection | img_url: '1024x' }} 2x ">
                                <source media="(max-width:768px)" srcset="{{ block.settings.collection | img_url: '768x' }}, {{ block.settings.collection | img_url: '1536x' }} 2x ">
                                <source srcset="{{ block.settings.collection | img_url: '1024x' }}, {{ block.settings.collection | img_url: '2048x' }} 2x">
                                <img src="{{ block.settings.collection | img_url: '1024x' }}" width='100%' height='100%'>
                            </picture>
                        </div>
                        {% assign placement = forloop.index | modulo: 2 %}
                        {% if placement == 1 %}
                            {% if forloop.index == section.blocks.size %}
                                <div class='caption final'>
                                    <h3>{{block.settings.collection.title}}</h3>
                                    <p>{{ block.settings.caption }}</p>
                                </div>
                            {% else %}
                            <div class='caption right'>
                                <h3>{{block.settings.collection.title}}</h3>
                                <p>{{ block.settings.caption }}</p>
                            </div>
                            {% endif %}
                        {% else %}
                            <div class='caption left'>
                                <h3>{{block.settings.collection.title}}</h3>
                                <p>{{ block.settings.caption }}</p>
                            </div>
                        {% endif %}
                    </a>
                </div>
            {% endcase %}
        {% endfor %}
    </div>
</section>
    

{% schema %}
    {
        "name": "Promotional Images",
        "settings": [
        ],
        "max_blocks": 5,
        "blocks": [
            {
                "name": "Slide",
                "type": "slide",
                "settings": [
                    {
                        "type" : "checkbox",
                        "id" : "show_slide",
                        "label" : "Show Slide",
                        "default": false
                    },
                    {
                        "type" : "text",
                        "id" : "caption",
                        "label" : "Slide Caption",
                        "default" : "View the collection"
                    },
                    {
                        "type" : "collection",
                        "id" : "collection",
                        "label" : "Collection Link"
                    }
                ]
            }
        ]
    }
{% endschema %}

{% style %}
.promo_images {
    width: 100%;
}

.promo_images div[class^="card"], .promo_images .image {
    position: relative;
    top: 0;
    left: 0;
    width: 100%;
    height: 250px;
}

.promo_images div[class^="card"] {
    margin-bottom: 8px;
}

.promo_images div[class^="card"]:last-of-type {
    margin-bottom: 0;
}

.promo_images div[class^="card"] img {
    object-fit: cover;
    object-position: top;
}

.promo_images .caption {
    position: absolute;
    bottom: 0;
    min-width: 180px;
    height: 70px;
    margin: 16px;
    background-color: rgba(255, 255, 255, 0.75);
    z-index: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    color: black;
}

.promo_images .caption h3 {
    font-family: 'Comfortaa', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 2rem;
    text-transform: uppercase;
    padding: 0 16px;
}

.promo_images .caption p {
  font-family: 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    font-size: 1.1rem;
}

.promo_images .caption.left {
    left: 0;
}

.promo_images .caption.right {
    right: 0;
}

.promo_images .caption.final {
    width: calc(100% - 32px);
}

@media (min-width: 800px) {
    .promo_images {
        padding: 0 16px;
        box-sizing: border-box;
        width: 100%;
        /* margin: 0 8px; */
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto;
        gap: 4px 8px; 
        grid-template-areas: 
            ". ."
            ". ."
            "card-final card-final"; 
    }
    .card.final {
        grid-area: card-final;
    }
}

{% endstyle %}